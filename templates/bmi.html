{% extends 'base.html' %}

{% block title %}‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì BMI - CodeFitKub{% endblock %}

{% block extra_head %}
<style>
    * { box-sizing: border-box; }

    .bmi-container {
        max-width: 600px;
        margin: 0 auto;
        padding: 1rem;
    }

    h1 {
        color: #008080;
        text-align: center;
        margin-bottom: 1.5rem;
        font-size: 2rem;
    }

    .bmi-form {
        background: #f0f8ff;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 2px 8px #0001;
    }

    .bmi-form label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: bold;
        color: #008080;
        font-size: 1rem;
    }

    .bmi-form input {
        width: 100%;
        padding: 0.6rem;
        margin-bottom: 1.2rem;
        border-radius: 6px;
        border: 1px solid #ccc;
        font-size: 1rem;
    }

    .bmi-form button {
        width: 100%;
        background: #008080;
        color: #fff;
        border: none;
        padding: 0.8rem;
        border-radius: 6px;
        font-size: 1.1rem;
        cursor: pointer;
        transition: background 0.3s;
    }

    .bmi-form button:hover {
        background: #005f5f;
    }

    .bmi-result {
        text-align: center;
        margin-top: 2rem;
        padding: 1rem;
    }

    .bmi-result h2 {
        color: #008080;
        font-size: 1.8rem;
    }

    .bmi-result p {
        font-size: 1.1rem;
    }

    /* ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏õ‡∏•‡∏ú‡∏• */
    .bmi-reference {
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 6px #0001;
        padding: 1rem;
        margin-top: 1.5rem;
    }

    .bmi-reference h3 {
        text-align: center;
        color: #008080;
        margin-bottom: 1rem;
        font-size: 1.3rem;
    }

    .bmi-reference .row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.7rem 1rem;
        border-radius: 8px;
        margin-bottom: 0.5rem;
        font-size: 1rem;
    }

    .bmi-reference .row span:first-child {
        font-weight: bold;
    }

    .bg-blue-50 { background: #e6f0ff; color: #004080; }
    .bg-green-50 { background: #e8f8f5; color: #00695c; }
    .bg-yellow-50 { background: #fff9e6; color: #8a6d00; }
    .bg-red-50 { background: #ffe6e6; color: #b00020; }

    /* ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
    @media (max-width: 600px) {
        h1 {
            font-size: 1.6rem;
        }

        .bmi-form {
            padding: 1.2rem;
        }

        .bmi-form input,
        .bmi-form button {
            font-size: 1rem;
            padding: 0.7rem;
        }

        .bmi-result h2 {
            font-size: 1.5rem;
        }

        .bmi-reference h3 {
            font-size: 1.2rem;
        }

        .bmi-reference .row {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.3rem;
            font-size: 0.95rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="bmi-container">
    <h1>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì BMI</h1>

    <form method="post" class="bmi-form" id="bmiForm">
        {% csrf_token %}
        <label for="height">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á (cm):</label>
        <input type="number" id="height" name="height" step="0.1" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 170">

        <label for="weight">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (kg):</label>
        <input type="number" id="weight" name="weight" step="0.1" required placeholder="‡πÄ‡∏ä‡πà‡∏ô 65">

        <button type="submit">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì BMI</button>
    </form>

    <div id="bmiResult" class="bmi-result hidden">
        <h2>‡∏Ñ‡πà‡∏≤‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡∏°‡∏ß‡∏•‡∏Å‡∏≤‡∏¢ (BMI): <span id="bmiValue"></span></h2>
        <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å: <strong id="bmiStatus"></strong> <span id="bmiIcon"></span></p>
        <p style="color:#555; max-width:700px; margin:0.5rem auto">
            ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: BMI ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏î‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤‡∏à‡∏≤‡∏Å‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡πÑ‡∏î‡πâ
        </p>
        <button onclick="resetCalculator()" class="mt-4 bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-6 rounded-lg transition-all duration-300">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡∏°‡πà</button>
    </div>

    <div class="bmi-reference">
        <h3>‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏ú‡∏• BMI</h3>
        <div class="row bg-blue-50">
            <span>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡∏ì‡∏ë‡πå</span><span>< 18.5</span>
        </div>
        <div class="row bg-green-50">
            <span>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏Å‡∏ï‡∏¥</span><span>18.5 - 24.9</span>
        </div>
        <div class="row bg-yellow-50">
            <span>‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô</span><span>25.0 - 29.9</span>
        </div>
        <div class="row bg-red-50">
            <span>‡∏≠‡πâ‡∏ß‡∏ô</span><span>‚â• 30.0</span>
        </div>
    </div>
</div>

<script>
document.getElementById('bmiForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const height = parseFloat(document.getElementById('height').value);
    const weight = parseFloat(document.getElementById('weight').value);

    if (!height || !weight || height <= 0 || weight <= 0) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
        return;
    }

    const heightInMeters = height / 100;
    const bmi = (weight / (heightInMeters * heightInMeters)).toFixed(1);

    let status, statusClass, icon;
    if (bmi < 18.5) {
        status = '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡∏ì‡∏ë‡πå';
        statusClass = 'bg-blue-100 text-blue-800';
        icon = 'üìâ';
    } else if (bmi <= 24.9) {
        status = '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏õ‡∏Å‡∏ï‡∏¥';
        statusClass = 'bg-green-100 text-green-800';
        icon = '‚úÖ';
    } else if (bmi <= 29.9) {
        status = '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô';
        statusClass = 'bg-yellow-100 text-yellow-800';
        icon = '‚ö†Ô∏è';
    } else {
        status = '‡∏≠‡πâ‡∏ß‡∏ô';
        statusClass = 'bg-red-100 text-red-800';
        icon = 'üö®';
    }

    document.getElementById('bmiValue').textContent = bmi;
    document.getElementById('bmiStatus').textContent = status;
    document.getElementById('bmiIcon').textContent = icon;
    document.getElementById('bmiResult').classList.remove('hidden');
    document.getElementById('bmiResult').scrollIntoView({ behavior: 'smooth' });
});

function resetCalculator() {
    document.getElementById('bmiForm').reset();
    document.getElementById('bmiResult').classList.add('hidden');
    document.getElementById('height').focus();
}
</script>
{% endblock %}
